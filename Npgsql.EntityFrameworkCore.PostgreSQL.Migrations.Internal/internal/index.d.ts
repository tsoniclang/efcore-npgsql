// Generated by tsbindgen - Architecture
// Namespace: Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal
// Assembly: Npgsql.EntityFrameworkCore.PostgreSQL

// Primitive type aliases from @tsonic/core
import type { sbyte, byte, short, ushort, int, uint, long, ulong, int128, uint128, half, float, double, decimal, nint, nuint, char } from '@tsonic/core/types.js';

// Import types from other namespaces
import * as System_Internal from "@tsonic/dotnet/System.js";
import type { IReadOnlyList } from "@tsonic/dotnet/System.Collections.Generic.js";
import type { Boolean as ClrBoolean, String as ClrString, Void } from "@tsonic/dotnet/System.js";
import type { CancellationToken } from "@tsonic/dotnet/System.Threading.js";
import type { Task } from "@tsonic/dotnet/System.Threading.Tasks.js";
import type { IDiagnosticsLogger, IRelationalCommandDiagnosticsLogger } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Diagnostics.js";
import type { ICurrentDbContext, IDbContextOptions, IModelRuntimeInitializer } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Infrastructure.js";
import type { DbLoggerCategory$Migrations } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.js";
import type { IDesignTimeModel } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Metadata.js";
import * as Microsoft_EntityFrameworkCore_Migrations_Internal_Internal from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Migrations.Internal.js";
import type { Migrator } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Migrations.Internal.js";
import * as Microsoft_EntityFrameworkCore_Migrations_Internal from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Migrations.js";
import type { HistoryRepository, HistoryRepositoryDependencies, HistoryRow, IHistoryRepository, IMigrationCommandExecutor, IMigrationsAssembly, IMigrationsDatabaseLock, IMigrationsModelDiffer, IMigrationsSqlGenerator, IMigrator, LockReleaseBehavior } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Migrations.js";
import type { IDatabaseCreator, IDatabaseProvider, IExecutionStrategy, IRawSqlCommandBuilder, IRelationalConnection, ISqlGenerationHelper } from "@tsonic/efcore/Microsoft.EntityFrameworkCore.Storage.js";

export interface NpgsqlHistoryRepository$instance extends HistoryRepository {
    readonly lockReleaseBehavior: LockReleaseBehavior;
    acquireDatabaseLock(): IMigrationsDatabaseLock;
    acquireDatabaseLockAsync(cancellationToken?: CancellationToken): Task<IMigrationsDatabaseLock>;
    exists(): boolean;
    existsAsync(cancellationToken?: CancellationToken): Task<System_Internal.Boolean>;
    getAppliedMigrations(): IReadOnlyList<HistoryRow>;
    getAppliedMigrationsAsync(cancellationToken?: CancellationToken): Task<IReadOnlyList<HistoryRow>>;
    getBeginIfExistsScript(migrationId: string): string;
    getBeginIfNotExistsScript(migrationId: string): string;
    getCreateIfNotExistsScript(): string;
    getEndIfScript(): string;
}


export const NpgsqlHistoryRepository: {
    new(dependencies: HistoryRepositoryDependencies): NpgsqlHistoryRepository;
};


export type NpgsqlHistoryRepository = NpgsqlHistoryRepository$instance;

export interface NpgsqlMigrator$instance extends Migrator {
    migrate(targetMigration: string): void;
    migrateAsync(targetMigration: string, cancellationToken?: CancellationToken): Task;
}


export const NpgsqlMigrator: {
    new(migrationsAssembly: IMigrationsAssembly, historyRepository: IHistoryRepository, databaseCreator: IDatabaseCreator, migrationsSqlGenerator: IMigrationsSqlGenerator, rawSqlCommandBuilder: IRawSqlCommandBuilder, migrationCommandExecutor: IMigrationCommandExecutor, connection: IRelationalConnection, sqlGenerationHelper: ISqlGenerationHelper, currentContext: ICurrentDbContext, modelRuntimeInitializer: IModelRuntimeInitializer, logger: IDiagnosticsLogger<DbLoggerCategory$Migrations>, commandLogger: IRelationalCommandDiagnosticsLogger, databaseProvider: IDatabaseProvider, migrationsModelDiffer: IMigrationsModelDiffer, designTimeModel: IDesignTimeModel, contextOptions: IDbContextOptions, executionStrategy: IExecutionStrategy): NpgsqlMigrator;
};


export type NpgsqlMigrator = NpgsqlMigrator$instance;

