// Generated by tsbindgen - Architecture
// Namespace: Npgsql.Replication
// Assembly: Npgsql

// Primitive type aliases from @tsonic/core
import type { sbyte, byte, short, ushort, int, uint, long, ulong, int128, uint128, half, float, double, decimal, nint, nuint, char } from '@tsonic/core/types.js';

// Import types from other namespaces
import type { PgOutputReplicationMessage } from "../../Npgsql.Replication.PgOutput.Messages/internal/index.js";
import type { PgOutputReplicationOptions, PgOutputReplicationSlot } from "../../Npgsql.Replication.PgOutput/internal/index.js";
import type { TestDecodingData, TestDecodingOptions, TestDecodingReplicationSlot } from "../../Npgsql.Replication.TestDecoding/internal/index.js";
import type { NpgsqlLogSequenceNumber } from "../../NpgsqlTypes/internal/index.js";
import type { IAsyncEnumerable_1 } from "@tsonic/dotnet/System.Collections.Generic/internal/index.js";
import type { Stream } from "@tsonic/dotnet/System.IO/internal/index.js";
import type { Encoding } from "@tsonic/dotnet/System.Text/internal/index.js";
import type { Task, Task_1, ValueTask } from "@tsonic/dotnet/System.Threading.Tasks/internal/index.js";
import type { CancellationToken } from "@tsonic/dotnet/System.Threading/internal/index.js";
import * as System_Internal from "@tsonic/dotnet/System/internal/index.js";
import type { Boolean as ClrBoolean, Byte, DateTime, Enum, IAsyncDisposable, IComparable, IConvertible, IFormattable, Int32, ISpanFormattable, Nullable_1, Object as ClrObject, String as ClrString, TimeSpan, UInt32, ValueType, Version, Void } from "@tsonic/dotnet/System/internal/index.js";

export enum LogicalSlotSnapshotInitMode {
    Export = 0,
    Use = 1,
    NoExport = 2
}


export interface ReplicationSlotOptions$instance {
    readonly __tsonic_type_Npgsql_Replication_ReplicationSlotOptions: never;

    readonly ConsistentPoint: NpgsqlLogSequenceNumber;
    readonly SlotName: string;
}


export const ReplicationSlotOptions: {
    new(slotName: string, consistentPoint: string): ReplicationSlotOptions;
    new(slotName: string, consistentPoint: NpgsqlLogSequenceNumber): ReplicationSlotOptions;
};


export type ReplicationSlotOptions = ReplicationSlotOptions$instance;

export interface TimelineHistoryFile$instance {
    readonly __tsonic_type_Npgsql_Replication_TimelineHistoryFile: never;

    readonly Content: byte[];
    readonly FileName: string;
}


export const TimelineHistoryFile: {
    new(): TimelineHistoryFile;
};


export type TimelineHistoryFile = TimelineHistoryFile$instance;

export interface LogicalReplicationConnection$instance extends ReplicationConnection {
    readonly __tsonic_type_Npgsql_Replication_LogicalReplicationConnection: never;

    readonly __tsonic_iface_System_IAsyncDisposable: never;

}


export const LogicalReplicationConnection: {
    new(): LogicalReplicationConnection;
    new(connectionString: string): LogicalReplicationConnection;
};


export type LogicalReplicationConnection = LogicalReplicationConnection$instance;

export interface PhysicalReplicationConnection$instance extends ReplicationConnection {
    readonly __tsonic_type_Npgsql_Replication_PhysicalReplicationConnection: never;

    readonly __tsonic_iface_System_IAsyncDisposable: never;

    CreateReplicationSlot(slotName: string, isTemporary?: boolean, reserveWal?: boolean, cancellationToken?: CancellationToken): Task_1<PhysicalReplicationSlot>;
    ReadReplicationSlot(slotName: string, cancellationToken?: CancellationToken): Task_1<PhysicalReplicationSlot | undefined>;
    StartReplication(slot: PhysicalReplicationSlot, walLocation: NpgsqlLogSequenceNumber, cancellationToken: CancellationToken, timeline?: uint): IAsyncEnumerable_1<XLogDataMessage>;
    StartReplication(walLocation: NpgsqlLogSequenceNumber, cancellationToken: CancellationToken, timeline?: uint): IAsyncEnumerable_1<XLogDataMessage>;
    StartReplication(slot: PhysicalReplicationSlot, cancellationToken: CancellationToken): IAsyncEnumerable_1<XLogDataMessage>;
}


export const PhysicalReplicationConnection: {
    new(): PhysicalReplicationConnection;
    new(connectionString: string): PhysicalReplicationConnection;
};


export type PhysicalReplicationConnection = PhysicalReplicationConnection$instance;

export interface PhysicalReplicationSlot$instance extends ReplicationSlot {
    readonly __tsonic_type_Npgsql_Replication_PhysicalReplicationSlot: never;

    readonly RestartLsn: Nullable_1<NpgsqlLogSequenceNumber>;
    readonly RestartTimeline: Nullable_1<System_Internal.UInt32>;
}


export const PhysicalReplicationSlot: {
    new(slotName: string, restartLsn: Nullable_1<NpgsqlLogSequenceNumber>, restartTimeline: Nullable_1<System_Internal.UInt32>): PhysicalReplicationSlot;
};


export type PhysicalReplicationSlot = PhysicalReplicationSlot$instance;

export interface ReplicationConnection$instance {
    readonly __tsonic_type_Npgsql_Replication_ReplicationConnection: never;

    readonly __tsonic_iface_System_IAsyncDisposable: never;

    CommandTimeout: TimeSpan;
    ConnectionString: string;
    readonly Encoding: Encoding;
    LastAppliedLsn: NpgsqlLogSequenceNumber;
    LastFlushedLsn: NpgsqlLogSequenceNumber;
    LastReceivedLsn: NpgsqlLogSequenceNumber;
    readonly PostgreSqlVersion: Version;
    readonly ProcessID: int;
    readonly ServerVersion: string;
    WalReceiverStatusInterval: TimeSpan;
    WalReceiverTimeout: TimeSpan;
    DisposeAsync(): ValueTask;
    DropReplicationSlot(slotName: string, wait?: boolean, cancellationToken?: CancellationToken): Task;
    IdentifySystem(cancellationToken?: CancellationToken): Task_1<ReplicationSystemIdentification>;
    Open(cancellationToken?: CancellationToken): Task;
    SendStatusUpdate(cancellationToken?: CancellationToken): Task;
    SetReplicationStatus(lastAppliedAndFlushedLsn: NpgsqlLogSequenceNumber): void;
    Show(parameterName: string, cancellationToken?: CancellationToken): Task_1<System_Internal.String>;
    TimelineHistory(tli: uint, cancellationToken?: CancellationToken): Task_1<TimelineHistoryFile>;
}


export const ReplicationConnection: {
};


export type ReplicationConnection = ReplicationConnection$instance;

export interface ReplicationMessage$instance {
    readonly __tsonic_type_Npgsql_Replication_ReplicationMessage: never;

    ServerClock: DateTime;
    WalEnd: NpgsqlLogSequenceNumber;
    WalStart: NpgsqlLogSequenceNumber;
}


export const ReplicationMessage: (abstract new() => ReplicationMessage) & {
};


export type ReplicationMessage = ReplicationMessage$instance;

export interface ReplicationSlot$instance {
    readonly __tsonic_type_Npgsql_Replication_ReplicationSlot: never;

    readonly Name: string;
}


export const ReplicationSlot: {
};


export type ReplicationSlot = ReplicationSlot$instance;

export interface ReplicationSystemIdentification$instance {
    readonly __tsonic_type_Npgsql_Replication_ReplicationSystemIdentification: never;

    readonly DbName: string | undefined;
    readonly SystemId: string;
    readonly Timeline: uint;
    readonly XLogPos: NpgsqlLogSequenceNumber;
}


export const ReplicationSystemIdentification: {
};


export type ReplicationSystemIdentification = ReplicationSystemIdentification$instance;

export interface XLogDataMessage$instance extends ReplicationMessage {
    readonly __tsonic_type_Npgsql_Replication_XLogDataMessage: never;

    Data: Stream;
}


export const XLogDataMessage: {
    new(): XLogDataMessage;
};


export type XLogDataMessage = XLogDataMessage$instance;

export abstract class PgOutputConnectionExtensions$instance {
    static CreatePgOutputReplicationSlot(connection: LogicalReplicationConnection, slotName: string, temporarySlot?: boolean, slotSnapshotInitMode?: Nullable_1<LogicalSlotSnapshotInitMode>, twoPhase?: boolean, cancellationToken?: CancellationToken): Task_1<PgOutputReplicationSlot>;
    static StartReplication(connection: LogicalReplicationConnection, slot: PgOutputReplicationSlot, options: PgOutputReplicationOptions, cancellationToken: CancellationToken, walLocation?: Nullable_1<NpgsqlLogSequenceNumber>): IAsyncEnumerable_1<PgOutputReplicationMessage>;
}


export type PgOutputConnectionExtensions = PgOutputConnectionExtensions$instance;

export abstract class TestDecodingConnectionExtensions$instance {
    static CreateTestDecodingReplicationSlot(connection: LogicalReplicationConnection, slotName: string, temporarySlot?: boolean, slotSnapshotInitMode?: Nullable_1<LogicalSlotSnapshotInitMode>, twoPhase?: boolean, cancellationToken?: CancellationToken): Task_1<TestDecodingReplicationSlot>;
    static StartReplication(connection: LogicalReplicationConnection, slot: TestDecodingReplicationSlot, cancellationToken: CancellationToken, options?: TestDecodingOptions, walLocation?: Nullable_1<NpgsqlLogSequenceNumber>): IAsyncEnumerable_1<TestDecodingData>;
}


export type TestDecodingConnectionExtensions = TestDecodingConnectionExtensions$instance;

